{"version":3,"sources":["0_variables.js","1_reset.js","2_form.js","3_collapsable.js","4_image.js","5_server.js","6_localStorage.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\r\n/* eslint-disable no-unused-vars */\r\n\r\n// 1- Elementos de la página que voy a usar.\r\n//elementos HTML de la tarjeta preview\r\nconst resetBtn = document.querySelector('.js-card__button');\r\nconst profileName = document.querySelector('.js-profile__name');\r\nconst profileText = document.querySelector('.js-profile__text');\r\nconst profileImg = document.querySelector('.js-image');\r\nconst linkMobile = document.querySelector('.js-nav__mobile');\r\nconst linkEmail = document.querySelector('.js-nav__mail');\r\nconst linkLinkedin = document.querySelector('.js-nav__linkedin');\r\nconst linkGithub = document.querySelector('.js-nav__github');\r\nconst cardArticlePreview = document.querySelector('.js-card__article');\r\n\r\n//Elemento HTML del form\r\nconst form = document.querySelector('.js-form');\r\n\r\n//elementos HTML del form de profile-cards, la parte de DISEÑA\r\nconst designClicker = document.querySelector('.js-design-clicker');\r\nconst paletteRadio1 = document.querySelector('.palettes__1--radio');\r\nconst paletteRadio2 = document.querySelector('.palettes__2--radio');\r\nconst paletteRadio3 = document.querySelector('.palettes__3--radio');\r\n\r\n//elementos HTML del form de profile-cards, la parte de RELLENA\r\nconst fillClicker = document.querySelector('.js-fill-clicker');\r\nconst inputName = document.querySelector('.js-name');\r\nconst inputJob = document.querySelector('.js-job');\r\nconst inputPhoto = document.querySelector('.js-photo');\r\nconst inputEmail = document.querySelector('.js-email');\r\nconst inputPhone = document.querySelector('.js-phone');\r\nconst inputLinkedin = document.querySelector('.js-linkedin');\r\nconst inputGithub = document.querySelector('.js-github');\r\n\r\n//elementos HTML del form de profile-cards, la parte de COMPARTE\r\nconst shareClicker = document.querySelector('.js-share-clicker');\r\nconst errorMessage = document.querySelector('.js-errormessage');\r\nconst newCardLink = document.querySelector('.js-new_cardlink');\r\nconst twitterBtn = document.querySelector('.js-twitter-share-button');\r\n\r\n//Arrows\r\nconst arrowDesign = document.querySelector('.js-arrow-design');\r\nconst sectionDesign = document.querySelector('.js-design__wrap2');\r\nconst arrowFill = document.querySelector('.js-arrow-fill');\r\nconst sectionFill = document.querySelector('.js-fill__wrap2');\r\nconst arrowShare = document.querySelector('.js-arrow-share');\r\nconst sectionShare = document.querySelector('.js-share-wrap-all');\r\n\r\n//Buttom form\r\nconst createCardBtn = document.querySelector('.js-create__btn');\r\nconst sectionCardCreate = document.querySelector('.js-share__wrap3');\r\n\r\n// 2- Variables globales: contiene los datos de la aplicación.\r\n\r\n//Objeto que guarda la data del form\r\nlet data = {\r\n  palette: '1',\r\n  name: '',\r\n  job: '',\r\n  phone: '',\r\n  email: '',\r\n  linkedin: '',\r\n  github: '',\r\n  photo: '',\r\n};\r\n","'use strict';\r\n/* eslint-disable no-undef */\r\n/* eslint-disable no-unused-vars */\r\n\r\nfunction resetBtnClick(event) {\r\n  event.preventDefault();\r\n  //resetear la variable data\r\n  data = {\r\n    palette: '1',\r\n    name: '',\r\n    job: '',\r\n    phone: '',\r\n    email: '',\r\n    linkedin: '',\r\n    github: '',\r\n    photo: '',\r\n  };\r\n  //esto oculta la sección de Twitter\r\n  sectionCardCreate.classList.add('collapsed');\r\n  //resetear el link de la nueva tarjeta creada\r\n  newCardLink.value = '';\r\n  newCardLink.href = '';\r\n  //resetear las paletas\r\n  cardArticlePreview.classList.add('palette-1');\r\n  cardArticlePreview.classList.remove('palette-2');\r\n  cardArticlePreview.classList.remove('palette-3');\r\n  paletteRadio1.checked = true;\r\n  //resetear los inputs\r\n  inputName.value = '';\r\n  inputJob.value = '';\r\n  fileField.value = '';\r\n  profileImage.style.backgroundImage = '';\r\n  profilePreview.style.backgroundImage = ''; // se queda por defecto la que hemos puesto\r\n  inputEmail.value = '';\r\n  inputPhone.value = '';\r\n  inputLinkedin.value = '';\r\n  inputGithub.value = '';\r\n  //limpiar el local storage\r\n  localStorage.clear();\r\n  //resetear el link del botón de Twitter\r\n  twitterBtn.href =\r\n    'https://twitter.com/intent/tweet?text=Mirad%20mi%20nueva%20tarjeta%20';\r\n  //volver a habilitar el botón de crear tarjeta\r\n  createCardBtn.disabled = false;\r\n  createCardBtn.classList.remove('button-disabled');\r\n\r\n  updatePreview();\r\n}\r\n\r\n//*Se podría hacer con reset() pero habría que añadir lo de cambiar las clases de las paletas\r\n// resetBtn.addEventListener('click', (event) => {\r\n//   event.preventDefault();\r\n//   form.reset();\r\n//   updatePreview();\r\n// });\r\n\r\n//BUCLE ( añadir el bucle dentro de la funcion manejadora, mantener las paletas y update preview();\r\n//(habría que añadir la clase \"js_reset\" a los inputs.)\r\n\r\n// function reset() {\r\n//   const inputsToReset = document.querySelectorAll('.js_reset');\r\n//   for (let i = 0; i < inputsToReset.length; i++) {\r\n//     inputsToReset[i].value = '';\r\n//   }\r\n// }\r\n\r\nresetBtn.addEventListener('click', resetBtnClick);\r\n","'use strict';\r\n/* eslint-disable no-undef */\r\n/* eslint-disable no-unused-vars */\r\n\r\n// 3- Funciones.\r\n\r\n//función que maneja el quitar y poner las clases de las paletas\r\n\r\nfunction handlePalette(event) {\r\n  cardArticlePreview.classList.remove('palette-1');\r\n  cardArticlePreview.classList.remove('palette-2');\r\n  cardArticlePreview.classList.remove('palette-3');\r\n  cardArticlePreview.classList.add(`palette-${event.currentTarget.value}`);\r\n}\r\n\r\n//función que maneja los inputs del form\r\nfunction handleInput(event) {\r\n  const elementName = event.target.name;\r\n  const value = event.target.value;\r\n\r\n  if (elementName === 'linkedin') {\r\n    const linkedinArray = value.split('/');\r\n    const length = linkedinArray.length;\r\n    if (value.endsWith('/')) {\r\n      data[elementName] = linkedinArray[length - 2];\r\n    } else {\r\n      data[elementName] = linkedinArray[length - 1];\r\n    }\r\n  } else if (elementName === 'github') {\r\n    const userGithub = value.replace('@', '');\r\n    data[elementName] = userGithub;\r\n  } else {\r\n    data[elementName] = value;\r\n  }\r\n\r\n  updatePreview();\r\n  saveData();\r\n}\r\n\r\n//TODO: preguntar cómo simplicar esto y hacer lo de linkedin y github\r\nfunction updatePreview() {\r\n  //Elemento input del Nombre en el formulario (RELLENA)\r\n  const name = inputName.value;\r\n  if (name === '') {\r\n    profileName.innerHTML = 'Nombre apellido';\r\n  } else {\r\n    profileName.innerHTML = name;\r\n  }\r\n  //Elemento input del Trabajo en el formulario (RELLENA)\r\n  const job = inputJob.value;\r\n  if (job === '') {\r\n    profileText.innerHTML = 'Front-end developer';\r\n  } else {\r\n    profileText.innerHTML = job;\r\n  }\r\n  //Elemento input del Teléfono en el formulario (RELLENA)\r\n  const phone = inputPhone.value;\r\n  if (phone === '') {\r\n    linkMobile.href = '';\r\n  } else {\r\n    linkMobile.href = `tel:${phone}`;\r\n  }\r\n  //Elemento input del Email en el formulario (RELLENA)\r\n  const email = inputEmail.value;\r\n  if (email === '') {\r\n    linkEmail.href = '';\r\n  } else {\r\n    linkEmail.href = `mailto:${email}`;\r\n  }\r\n  //Elemento input del linkedin en el formulario (RELLENA)\r\n  const linkedin = inputLinkedin.value;\r\n  if (linkedin === '') {\r\n    linkLinkedin.href = '';\r\n  } else {\r\n    const linkedinArray = linkedin.split('/');\r\n    const length = linkedinArray.length;\r\n    let userLinkedin = '';\r\n    if (linkedin.endsWith('/')) {\r\n      userLinkedin = linkedinArray[length - 2];\r\n    } else {\r\n      userLinkedin = linkedinArray[length - 1];\r\n    }\r\n    linkLinkedin.href = `https://www.linkedin.com/in/${userLinkedin}`;\r\n  }\r\n  //Elemento input del github en el formulario (RELLENA)\r\n  const github = inputGithub.value;\r\n  if (github === '') {\r\n    linkGithub.href = '';\r\n  } else {\r\n    const userGithub = github.replace('@', '');\r\n    linkGithub.href = `https://github.com/${userGithub}`;\r\n  }\r\n}\r\n\r\n// 4- Eventos.\r\n\r\n//Eventos click para las paletas (elemento input type = \"radio\") del formulario (DISEÑA)\r\npaletteRadio1.addEventListener('click', handlePalette);\r\npaletteRadio2.addEventListener('click', handlePalette);\r\npaletteRadio3.addEventListener('click', handlePalette);\r\n\r\n//Evento para el form completo\r\nform.addEventListener('input', handleInput);\r\n\r\n//Cuando se carga la página\r\ncreateCardBtn.disabled = false; //esto habrá que revisarlo\r\n","'use strict';\r\n/* eslint-disable no-undef */\r\n/* eslint-disable no-unused-vars */\r\n\r\ndesignClicker.addEventListener('click', (event) => {\r\n  event.preventDefault();\r\n\r\n  if (sectionDesign.classList.contains('collapsed')) {\r\n    sectionDesign.classList.remove('collapsed');\r\n    arrowDesign.classList.add('arrow-up');\r\n    arrowDesign.classList.remove('arrow-down');\r\n    closeFill();\r\n    closeShare();\r\n  }\r\n});\r\n\r\nfillClicker.addEventListener('click', (event) => {\r\n  event.preventDefault();\r\n  if (sectionFill.classList.contains('collapsed')) {\r\n    sectionFill.classList.remove('collapsed');\r\n    arrowFill.classList.add('arrow-up');\r\n    arrowFill.classList.remove('arrow-down');\r\n    closeDesign();\r\n    closeShare();\r\n  }\r\n});\r\n\r\nshareClicker.addEventListener('click', (event) => {\r\n  event.preventDefault();\r\n  if (sectionShare.classList.contains('collapsed')) {\r\n    sectionShare.classList.remove('collapsed');\r\n    arrowShare.classList.add('arrow-up');\r\n    arrowShare.classList.remove('arrow-down');\r\n    closeDesign();\r\n    closeFill();\r\n  }\r\n});\r\n\r\nfunction closeDesign() {\r\n  sectionDesign.classList.add('collapsed');\r\n  arrowDesign.classList.add('arrow-down');\r\n  arrowDesign.classList.remove('arrow-up');\r\n}\r\n\r\nfunction closeShare() {\r\n  sectionShare.classList.add('collapsed');\r\n  arrowShare.classList.add('arrow-down');\r\n  arrowShare.classList.remove('arrow-up');\r\n}\r\n\r\nfunction closeFill() {\r\n  sectionFill.classList.add('collapsed');\r\n  arrowFill.classList.add('arrow-down');\r\n  arrowFill.classList.remove('arrow-up');\r\n}\r\n\r\n//si existe el link que nos devolvió la API, lo mostramos\r\n//si no, escondemos la sección\r\nif (JSON.parse(localStorage.getItem('newCardUrl'))) {\r\n  //esto muestra la sección de Twitter\r\n  sectionCardCreate.classList.remove('collapsed');\r\n  //desactivar el botón de crear tarjeta\r\n  createCardBtn.disabled = true;\r\n  createCardBtn.classList.add('button-disabled');\r\n  //poner el link naranjita con la URL que nos devolvió la API\r\n  newCardLink.innerHTML = JSON.parse(localStorage.getItem('newCardUrl'));\r\n  newCardLink.href = JSON.parse(localStorage.getItem('newCardUrl')); //esto pone el href igual al link que nos devuelve el servidor\r\n  //poner el botón de twitter con la URL que nos devolvió la API\r\n  twitterBtn.href += JSON.parse(localStorage.getItem('newCardUrl'));\r\n} else {\r\n  //esto oculta la sección de Twitter\r\n  sectionCardCreate.classList.add('collapsed');\r\n}\r\n","'use strict';\r\n/* eslint-disable no-undef */\r\n\r\nconst fr = new FileReader();\r\nconst fileField = document.querySelector('.js__profile-upload-btn');\r\nconst profileImage = document.querySelector('.js__profile-image');\r\nconst profilePreview = document.querySelector('.js__profile-preview');\r\n\r\n/**\r\n * Recoge el archivo añadido al campo de tipo \"file\"\r\n * y lo carga en nuestro objeto FileReader para que\r\n * lo convierta a algo con lo que podamos trabajar.\r\n * Añade un listener al FR para que ejecute una función\r\n * al tener los datos listos\r\n * @param {evento} e\r\n */\r\nfunction getImage(e) {\r\n  const myFile = e.currentTarget.files[0];\r\n  fr.addEventListener('load', writeImage);\r\n  fr.readAsDataURL(myFile);\r\n}\r\n\r\n/**\r\n * Una vez tenemos los datos listos en el FR podemos\r\n * trabajar con ellos ;)\r\n */\r\nfunction writeImage() {\r\n  /* En la propiedad `result` de nuestro FR se almacena\r\n   * el resultado. Ese resultado de procesar el fichero que hemos cargado\r\n   * podemos pasarlo como background a la imagen de perfil y a la vista previa\r\n   * de nuestro componente.\r\n   */\r\n  profileImage.style.backgroundImage = `url(${fr.result})`;\r\n  profilePreview.style.backgroundImage = `url(${fr.result})`;\r\n  data.photo = fr.result;\r\n}\r\n\r\n/**\r\n * Añadimos los listeners necesarios:\r\n * - al botón visible para generar el click automático\r\n * - al campo oculto para cuando cambie su value\r\n */\r\nfileField.addEventListener('change', getImage);\r\n","'use strict';\r\n/* eslint-disable indent */\r\n/* eslint-disable no-undef */\r\n\r\nfunction handleCreateCardClick(event) {\r\n  event.preventDefault();\r\n  fetch('https://awesome-profile-cards.herokuapp.com/card', {\r\n    method: 'POST',\r\n    body: JSON.stringify(data),\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n  })\r\n    .then((response) => response.json())\r\n\r\n    .then((responseJson) => {\r\n      console.log(responseJson);\r\n      if (responseJson.success) {\r\n        sectionCardCreate.classList.remove('collapsed');\r\n        errorMessage.innerHTML = '';\r\n        newCardLink.innerHTML = responseJson.cardURL;\r\n        newCardLink.href = responseJson.cardURL; //esto pone el href igual al link que nos devuelve el servidor\r\n        twitterBtn.href += responseJson.cardURL;\r\n        createCardBtn.disabled = true;\r\n        createCardBtn.classList.add('button-disabled');\r\n        localStorage.setItem(\r\n          'newCardUrl',\r\n          JSON.stringify(responseJson.cardURL)\r\n        );\r\n      } else {\r\n        sectionCardCreate.classList.add('collapsed');\r\n\r\n        errorMessage.innerHTML = 'Debes rellenar todos los campos';\r\n        console.log('error');\r\n      }\r\n    });\r\n}\r\n\r\ncreateCardBtn.addEventListener('click', handleCreateCardClick);\r\n","'use strict';\r\n/* eslint-disable no-unused-vars */\r\n/* eslint-disable no-undef */\r\n\r\nfunction saveData() {\r\n  localStorage.setItem('dataFromForm', JSON.stringify(data));\r\n}\r\n\r\nfunction printFromLocal() {\r\n  data = JSON.parse(localStorage.getItem('dataFromForm'));\r\n  if (data.palette === '2') {\r\n    paletteRadio1.checked = false;\r\n    paletteRadio2.checked = true;\r\n    paletteRadio3.checked = false;\r\n    cardArticlePreview.classList.add('palette-2');\r\n    cardArticlePreview.classList.remove('palette-1');\r\n    cardArticlePreview.classList.remove('palette-3');\r\n  } else if (data.palette === '3') {\r\n    paletteRadio1.checked = false;\r\n    paletteRadio2.checked = false;\r\n    paletteRadio3.checked = true;\r\n    cardArticlePreview.classList.add('palette-3');\r\n    cardArticlePreview.classList.remove('palette-1');\r\n    cardArticlePreview.classList.remove('palette-2');\r\n  } else {\r\n    paletteRadio1.checked = true;\r\n    paletteRadio2.checked = false;\r\n    paletteRadio3.checked = false;\r\n    cardArticlePreview.classList.add('palette-1');\r\n    cardArticlePreview.classList.remove('palette-2');\r\n    cardArticlePreview.classList.remove('palette-3');\r\n  }\r\n\r\n  inputName.value = data.name;\r\n  inputJob.value = data.job;\r\n  if (data.photo) {\r\n    profileImage.style.backgroundImage = `url(${data.photo})`;\r\n    profilePreview.style.backgroundImage = `url(${data.photo})`;\r\n  }\r\n  inputPhone.value = data.phone;\r\n  inputEmail.value = data.email;\r\n  inputLinkedin.value = data.linkedin;\r\n  inputGithub.value = data.github;\r\n\r\n  //esta función pinta lo que tenga data en la tarjeta preview\r\n  updatePreview();\r\n}\r\n\r\n//if el localStorage está relleno, ejecuta printPreview()\r\n//si no está relleno hacemos el fetch\r\nif (JSON.parse(localStorage.getItem('dataFromForm'))) {\r\n  printFromLocal();\r\n}\r\n"]}